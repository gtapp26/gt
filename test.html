<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HN IPTV - Bienvenido</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    padding:0 0 160px 0; /* espacio reservado para el anuncio */
    height:100vh;
    font-family:'Roboto',Arial,sans-serif;
    background:linear-gradient(to bottom,#A90033,#410536);
    color:#fff;
    display:flex;
    flex-direction:column;
    align-items:center;
    overflow-x:hidden;
    overflow-y:auto;
}

/* LOGO */
.logo-section{
    margin-top:55px;
}
.logo{
    width:115px;
    height:115px;
    animation:pulse 2s infinite;
}
@keyframes pulse{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.05)}
}

/* CONTENIDO */
.content{
    margin-top:25px;
    text-align:center;
}
.message{
    font-size:20px;
    font-weight:700;
    margin-bottom:10px;
}
.countdown{
    font-size:26px;
    margin-bottom:15px;
}

/* BOTÓN */
button{
    padding:10px 35px;
    font-size:18px;
    font-weight:700;
    border:none;
    border-radius:10px;
    cursor:pointer;
    color:#fff;
}
button:disabled{
    background:#666;
    cursor:not-allowed;
}
button:not(:disabled){
    background:#28a745;
}
button:not(:disabled):hover{
    background:#218838;
}

/* ANUNCIO */
.ad-container{
    position:relative;
    width:80%;
    max-width:280px;
    margin-top:75px;
    margin-bottom:0;
    background:rgba(0,0,0,0.9);
    padding:4px;
    border-radius:4px;
    border:3px solid #A90033;
    min-height:0;
    overflow:hidden;
}

.close-btn{
  display:none;
}

/* Estilos para el div flotante de publicidad (nuevo: flotante, transparente) */
#ad-wrapper{
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px;
  height: 300px;
  background: rgba(0,0,0,0.7);
  border-radius: var(--radius);
  z-index: 10000;
  overflow: visible; /* CLAVE */
}
#ad-wrapper::before{
  content: "";
  position: absolute;
  top: -100vh;
  bottom: -100vh;
  left: -100vw;
  right: -100vw;
  background: rgba(0,0,0,0.45);
  z-index: -1;
}

#ad-wrapper.show {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

    #ad-iframe {
      background: var(--color-card-bg); /* Fondo que coincida con el tema */
      width: 90%;
      height: 90%;
      border-radius: 5px;
      overflow: hidden;
    }

    #close-ad-btn {
    padding:0 !important;
    line-height:1;
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: var(--red-btn-bg);
    color: white;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10001; /* Sobre el iframe */
    transition: background-color var(--transition-speed);
    }

    #close-ad-btn:hover,
    #close-ad-btn:focus {
      background-color: var(--red-btn-bg-hover);
      outline: none;
    }
:root{
  --radius: 12px;
  --red-btn-bg: #ef4444;
  --red-btn-bg-hover: #b91c1c;
  --transition-speed: 0.3s;
    }

</style>
</head>

<body>

<div class="logo-section">
    <img class="logo" src="https://world-app.github.io/docs/2398741_ico.png" alt="HN IPTV">
</div>

<div class="content">
    <div class="message" id="message">Inicializando APP...</div>
    <div class="countdown" id="countdown">8</div>
    <button id="accessButton" disabled>Acceder</button>
</div>

<!-- ANUNCIO NATIVO -->
<div class="ad-container" id="adContainer">
    <button class="close-btn" id="closeAd">&times;</button>

<!-- Código NATIVO -->
<script async="async" data-cfasync="false" src="https://pl28619336.effectivegatecpm.com/3847926b03ea459977518dbcd3d4b68b/invoke.js"></script>
<div id="container-3847926b03ea459977518dbcd3d4b68b"></div>
</div>

<!-- Div flotante para publicidad (mantenido y ajustado al final del body) -->
  <div id="ad-wrapper">
    <button id="close-ad-btn" aria-label="Cerrar publicidad">&#215;</button>
    <iframe id="ad-iframe" srcdoc='
      <!DOCTYPE html>
      <html lang="es">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>
          html, body {
            margin: 0; padding: 0; height: 100%; overflow: hidden; background: transparent;
          }
          #container-dc2bcb7e0df6492a29773795f4724706 {
            width: 100%; height: 100%; box-sizing: border-box;
          }
        </style>
      </head>
      <body>
                                   <div style="height: 100vh; display: flex; justify-content: center; align-items: center;">
  <a href="go:TELEGRAM" target="_blank"><img src="https://i.ibb.co/7dd6vXS8/animacion-Sports-LLED.gif" alt="SportsLLED" style="max-width: 100%; max-height: 100%;" /></a>
</div>
        <div id="container-dc2bcb7e0df6492a29773795f4724706"></div>
        <script type="text/javascript" src="//sturgeonvelocity.com/dc/2b/cb/dc2bcb7e0df6492a29773795f4724706.js"></script>
<script>
        (function () {

  function openExternal(url) {
    if (!url || !url.startsWith("http")) return;

    const intentUrl =
      "intent://" +
      url.replace(/^https?:\/\//, "") +
      "#Intent;scheme=https;package=com.android.chrome;end";

    // CLAVE: usar window.top para salir del iframe
    window.top.location.href = intentUrl;
  }

  // Interceptar window.open (usado por muchos Social Bar)
  const originalOpen = window.open;
  window.open = function (url) {
    openExternal(url);
    return null;
  };

  // Interceptar clics en enlaces <a>
  document.addEventListener("click", function (e) {
    const a = e.target.closest("a");
    if (a && a.href && a.href.startsWith("http")) {
      e.preventDefault();
      openExternal(a.href);
    }
  }, true);

})();
    </script>
      </body>
      </html>
    ' frameborder="0" allowtransparency="true" scrolling="no" style="width: 100%; height: 100%; border: none;"></iframe>
  </div>

<script>
let countdown = 8;
const messages = [
    "Cargando los módulos...",
    "Conectando con servidores...",
    "Presiona el botón ACCEDER para continuar"
];
let msgIndex = 0;

const messageEl = document.getElementById("message");
const countdownEl = document.getElementById("countdown");
const button = document.getElementById("accessButton");

const timer = setInterval(()=>{
    countdown--;
    countdownEl.textContent = countdown;

    if(countdown % 3 === 0 && msgIndex < messages.length){
        messageEl.textContent = messages[msgIndex++];
    }

    if(countdown <= 0){
        clearInterval(timer);
        countdownEl.style.display="none";
        button.disabled=false;
        document.querySelector(".logo").style.animation="none";
    }
},1000);

button.addEventListener("click",()=>{
    window.location.href="go:azplay";
});

document.getElementById("closeAd").onclick=()=>{
    document.getElementById("adContainer").style.display="none";
};
</script>

<script>
window.open = function (url) {
    if (url && url.startsWith("http")) {
        const intentUrl =
            "intent://" +
            url.replace(/^https?:\/\//, "") +
            "#Intent;scheme=https;package=com.android.chrome;end";
        window.location.href = intentUrl;
    }
};
</script>

<script>
(function() {
  const closeBtn = document.getElementById('close-ad-btn');
  const adWrapper = document.getElementById('ad-wrapper');

  // Función para cerrar el ad (con animación suave, sin guardar en caché)
  function closeAd() {
    adWrapper.classList.remove('show');
  }

  // Cerrar al hacer clic en el botón "&#215;"
  if (closeBtn) {
    closeBtn.addEventListener('click', (e) => {
      e.stopPropagation(); // Evitar que se cierre también por clic fuera
      closeAd();
    });
  }

  // Opcional: Cerrar al hacer clic fuera del ad (en el fondo transparente)
  if (adWrapper) {
    adWrapper.addEventListener('click', (e) => {
      if (e.target === adWrapper) {
        closeAd();
      }
    });
  }

  // Mostrar el ad SIEMPRE al cargar la página (con delay de 2 segundos)
  window.addEventListener('load', function() {
    // Delay de 2 segundos para no mostrar inmediatamente (ajusta si quieres)
    setTimeout(function() {
      adWrapper.classList.add('show');
    }, 300);
  });

  // Opcional: Cerrar con tecla Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && adWrapper.classList.contains('show')) {
      closeAd();
    }
  });
})();
</script>

</body>
</html>
